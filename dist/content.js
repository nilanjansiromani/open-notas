(()=>{var e=null;function n(){if(!document.getElementById("open-notas-float-btn")){var e=document.createElement("button");e.id="open-notas-float-btn",e.innerHTML="üìù",e.style.cssText="\n    position: fixed;\n    bottom: 20px;\n    right: 20px;\n    width: 56px;\n    height: 56px;\n    border-radius: 50%;\n    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n    color: white;\n    border: none;\n    cursor: pointer;\n    font-size: 28px;\n    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);\n    z-index: 999998;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    transition: all 0.3s ease;\n    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;\n  ",e.onmouseenter=function(e){e.target.style.transform="scale(1.1)",e.target.style.boxShadow="0 6px 20px rgba(0, 0, 0, 0.25)"},e.onmouseleave=function(e){e.target.style.transform="scale(1)",e.target.style.boxShadow="0 4px 12px rgba(0, 0, 0, 0.15)"},e.onclick=t,document.body.appendChild(e)}}function t(){var n=document.getElementById("open-notas-overlay");if(n){var t=n.parentNode;t&&t.removeChild(n)}else{var o=document.createElement("div");o.id="open-notas-overlay",o.style.cssText="\n      position: fixed;\n      right: 0;\n      top: 0;\n      width: 30%;\n      height: 100%;\n      background: white;\n      box-shadow: -2px 0 10px rgba(0, 0, 0, 0.1);\n      z-index: 999999;\n      border-left: 1px solid #e0e0e0;\n      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;\n    ",document.body.appendChild(o),window.__openNotasSelectedData=e;var a=document.createElement("script");a.src=chrome.runtime.getURL("overlay.js"),a.addEventListener("load",function(){var e=a.parentNode;e&&e.removeChild(a)}),(document.head||document.documentElement).appendChild(a);var r=document.createElement("link");r.rel="stylesheet",r.href=chrome.runtime.getURL("overlay.css"),document.head.appendChild(r)}}chrome.runtime.onMessage.addListener(function(n,o,a){"toggleOverlay"===n.action&&t(),"addSelectedText"===n.action&&(e={text:n.selectedText,pageUrl:n.pageUrl,pageTitle:n.pageTitle},function(e,n,o){var a;document.getElementById("on-selection-popup")&&(null===(a=document.getElementById("on-selection-popup"))||void 0===a||a.remove());var r=document.createElement("div");r.id="on-selection-popup",r.style.cssText="\n    position: fixed;\n    top: 50%;\n    left: 50%;\n    transform: translate(-50%, -50%);\n    background: white;\n    border-radius: 12px;\n    box-shadow: 0 10px 40px rgba(0, 0, 0, 0.2);\n    z-index: 999999;\n    padding: 24px;\n    max-width: 400px;\n    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;\n  ",r.innerHTML='\n    <div style="margin-bottom: 16px;">\n      <p style="margin: 0 0 8px 0; color: #666; font-size: 12px; text-transform: uppercase; font-weight: 600;">Selected Text</p>\n      <p style="margin: 0; padding: 12px; background: #f5f5f5; border-radius: 6px; font-size: 14px; color: #333; max-height: 100px; overflow-y: auto;">\n        "'.concat(e,'"\n      </p>\n    </div>\n    <div style="margin-bottom: 16px;">\n      <p style="margin: 0 0 8px 0; color: #666; font-size: 12px; text-transform: uppercase; font-weight: 600;">From Page</p>\n      <p style="margin: 0; font-size: 13px; color: #007bff; word-break: break-all;">\n        <a href="').concat(n,'" target="_blank" style="color: #007bff; text-decoration: none;">').concat(o||n,'</a>\n      </p>\n    </div>\n    <div style="display: flex; gap: 8px;">\n      <button id="add-selection-btn" style="flex: 1; padding: 10px; background: #28a745; color: white; border: none; border-radius: 6px; cursor: pointer; font-weight: 500; font-size: 14px;">Add to Notes</button>\n      <button id="cancel-selection-btn" style="flex: 1; padding: 10px; background: #e0e0e0; color: #333; border: none; border-radius: 6px; cursor: pointer; font-weight: 500; font-size: 14px;">Cancel</button>\n    </div>\n  '),document.body.appendChild(r),document.getElementById("add-selection-btn").onclick=function(){r.remove(),t()},document.getElementById("cancel-selection-btn").onclick=function(){r.remove()}}(n.selectedText,n.pageUrl,n.pageTitle))}),window.addEventListener("message",function(e){e.source===window&&("GET_NOTES"===e.data.type&&chrome.storage.local.get(["notes"],function(e){window.postMessage({type:"NOTES_DATA",notes:e.notes||[]},"*")}),"SAVE_NOTES"===e.data.type&&chrome.storage.local.set({notes:e.data.notes},function(){console.log("Notes saved from overlay")}))}),"loading"===document.readyState?document.addEventListener("DOMContentLoaded",n):n()})();