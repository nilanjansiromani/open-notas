chrome.runtime.onInstalled.addListener(function(){console.log("Open Notas extension installed"),chrome.contextMenus.create({id:"add-to-notes",title:"Add to Open Notas",contexts:["selection"]})}),chrome.commands.onCommand.addListener(function(e){"toggle-overlay"===e&&chrome.tabs.query({active:!0,currentWindow:!0},function(e){e[0]&&chrome.tabs.sendMessage(e[0].id||0,{action:"toggleOverlay"})})}),chrome.contextMenus.onClicked.addListener(function(e){"add-to-notes"===e.menuItemId&&e.selectionText&&chrome.tabs.query({active:!0,currentWindow:!0},function(t){t[0]&&chrome.tabs.sendMessage(t[0].id||0,{action:"addSelectedText",selectedText:e.selectionText,pageUrl:e.pageUrl||t[0].url,pageTitle:t[0].title})})}),chrome.runtime.onMessage.addListener(function(e,t,o){return"getNotes"===e.action?(chrome.storage.local.get(["notes"],function(e){o({notes:e.notes||[]})}),!0):"saveNotes"===e.action?(chrome.storage.local.set({notes:e.data},function(){o({success:!0})}),!0):void 0});